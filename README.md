å®Œæ•´è³‡è¨Šåœ¨ https://github.com/squirrel1209/TAIFEXPacketParser.git

# ğŸ§  TAIFEXPacketProject

TAIFEXPacketProject æ˜¯å°ˆç‚ºå°ç£æœŸäº¤æ‰€ï¼ˆTAIFEXï¼‰å°åŒ…æ ¼å¼æ‰€æ‰“é€ çš„é«˜æ•ˆèƒ½å°åŒ…è§£æç³»çµ±ã€‚æ”¯æ´è§£æå¤šæ ¼å¼å°åŒ…ï¼ˆI010ã€I012ã€I020ã€I080ï¼‰ï¼Œä¸¦å°‡æœŸè²¨/é¸æ“‡æ¬Šè³‡æ–™åˆ†åˆ¥è¼¸å‡ºç‚º 8 å€‹ CSV æª”ï¼Œé©ç”¨æ–¼å¸‚å ´è³‡æ–™ç›£æ§ã€äº¤æ˜“ç³»çµ±å‰ç½®è™•ç†ç­‰æ‡‰ç”¨ã€‚


## âœ… ä¸€. åŠŸèƒ½ç¸½è¦½

| åŠŸèƒ½                  | èªªæ˜                                          |
|-----------------------|---------------------------------------------|
| æ’®åˆæˆäº¤è³‡æ–™è§£æ      | è§£æ I020ï¼Œå–å¾—å•†å“ä»£ç¢¼ã€åƒ¹æ ¼ã€æ•¸é‡ã€æ™‚é–“     |
| æ¼²è·Œå¹…è³‡è¨Šè§£æ        | è§£æ I012ï¼Œå–å¾—å•†å“çš„æ¼²è·Œåœå€é–“                |
| å§”è¨—ç°¿å¿«ç…§è§£æ        | è§£æ I080ï¼Œå–å¾—äº”æª”è²·è³£ç›¤åƒ¹æ ¼èˆ‡æ•¸é‡             |
| å•†å“åŸºæœ¬è³‡æ–™è§£æ      | è§£æ I010ï¼Œå–å¾—å•†å“ä»£ç¢¼èˆ‡äº¤å‰²æ—¥                 |
| å¤šæ ¼å¼åˆ†æµå„²å­˜        | æŒ‰æ ¼å¼/å•†å“é¡å‹ (æœŸè²¨/é¸æ“‡æ¬Š) è¼¸å‡ºç‚º 8 å€‹ CSV  |
| æ“´å……æ€§è¨­è¨ˆ            | æ˜“æ–¼æ–°å¢æ–°æ ¼å¼ Parserï¼Œæ”¯æ´å¤šåŸ·è¡Œç·’è™•ç† (WIP)    |

---

## ğŸ“œ äºŒ.è³‡æ–™è¡¨ (ä½¿ç”¨ `unordered_map` å„²å­˜å®¹å™¨)

### 1. `MatchInfo`ï¼ˆæ’¥åˆè³‡è¨Šï¼šI020ï¼‰

> å„²å­˜æ–¼ï¼š
> `std::unordered_map<std::string, std::vector<MatchInfo>> matchInfoMap;`
> ğŸ” å¯ä¾ `productId` å¿«é€ŸæŸ¥æ‰¾æ¯å€‹å•†å“çš„æ­·å²æ’¥åˆç´€éŒ„

| æ¬„ä½åç¨±        | å‹æ…‹     | èªªæ˜           |
| ----------- | ------ | ------------ |
| productId   | string | å•†å“ä»£ç¢¼         |
| matchTime   | int    | æˆäº¤æ™‚é–“ï¼ˆHHMMSSï¼‰ |
| matchPrice  | double | æˆäº¤åƒ¹æ ¼         |
| matchVolume | int    | æˆäº¤æ•¸é‡ï¼ˆå£æ•¸ï¼‰     |
| buySellFlag | char   | è²·è³£æ–¹å‘ï¼ˆB/Sï¼‰    |

---

### 2. `PriceBandInfo`ï¼ˆæ¼²è·Œåœè³‡è¨Šï¼šI012ï¼‰

> å„²å­˜æ–¼ï¼š
> `std::unordered_map<std::string, std::vector<PriceBandInfo>> priceBandMap;`
> ğŸ” å¯ä¾å•†å“ä»£ç¢¼æŸ¥æ‰¾æ¯å€‹æ™‚é–“é»çš„å¤šéšæ¼²è·Œåœå€é–“è¨­å®š

| æ¬„ä½åç¨±       | å‹æ…‹     | èªªæ˜         |
| ---------- | ------ | ---------- |
| productId  | string | å•†å“ä»£ç¢¼       |
| limitLevel | int    | éšæ•¸ï¼ˆç¬¬å¹¾å±¤æ¼²è·Œåœï¼‰ |
| raiseLimit | double | æ¼²åœåƒ¹æ ¼       |
| fallLimit  | double | è·Œåœåƒ¹æ ¼       |

---

### 3. `OrderBookInfo`ï¼ˆäº”æ¨“è³‡è¨Šï¼šI080ï¼‰

> å„²å­˜æ–¼ï¼š
> `std::unordered_map<std::string, std::vector<OrderBookInfo>> orderBookMap;`
> ğŸ” å¯ä¾å•†å“ä»£ç¢¼è¿½è¹¤æ™‚é–“åºåˆ—çš„è²·è³£æ›å–®è®ŠåŒ–

| æ¬„ä½åç¨±          | å‹æ…‹        | èªªæ˜   |
| ------------- | --------- | ---- |
| productId     | string    | å•†å“ä»£ç¢¼ |
| updateTime    | int       | è³‡æ–™æ™‚é–“ |
| bidPrice\[5]  | double\[] | äº”æ¨“è²·åƒ¹ |
| bidVolume\[5] | int\[]    | äº”æ¨“è²·é‡ |
| askPrice\[5]  | double\[] | äº”æ¨“è³£åƒ¹ |
| askVolume\[5] | int\[]    | äº”æ¨“è³£é‡ |

---

### 4. `ProductInfo`ï¼ˆå•†å“åŸºæœ¬è³‡è¨Šï¼šI010ï¼‰

> å„²å­˜æ–¼ï¼š
> `std::unordered_map<std::string, ProductInfo> productInfoMap;`
> ğŸ” å¯ç›´æ¥æŸ¥è©¢ç‰¹å®šå•†å“çš„åç¨±èˆ‡äº¤å‰²æœˆä»½ï¼ˆéœæ…‹è³‡æ–™ï¼‰

| æ¬„ä½åç¨±          | å‹æ…‹     | èªªæ˜   |
| ------------- | ------ | ---- |
| productId     | string | å•†å“ä»£ç¢¼ |
| productName   | string | å•†å“åç¨± |
| deliveryMonth | string | äº¤å‰²æœˆä»½ |



## ğŸ§© ä¸‰.UML æ¨¡çµ„é—œè¯åœ–ï¼ˆå¯¦é«”åœ–ï¼‰

![æ¨¡çµ„ç‰©ä»¶åœ–](system_diagram.png)

---

## ğŸ”„ å››.è³‡æ–™è™•ç†æµç¨‹åœ–

![è³‡æ–™è™•ç†æµç¨‹åœ–](data_flowchart.png)

---

# ğŸ“„ äº”.è¼¸å‡ºå…¥æ ¼å¼

æª”æ¡ˆæ ¼å¼ : .CSVæª”

---

## âœ… I020 æ’®åˆè³‡è¨Š

### å°æ‡‰çµæ§‹ï¼š`MatchInfo`

| CSV æ¬„ä½     | å‹æ…‹     | èªªæ˜         | çµæ§‹æ¬„ä½     |
|--------------|----------|--------------|--------------|
| `time`       | int      | æˆäº¤æ™‚é–“     | `matchTime`  |
| `productId`  | string   | å•†å“ä»£ç¢¼     | `productId`  |
| `price`      | double   | æˆäº¤åƒ¹æ ¼     | `matchPrice` |
| `volume`     | int      | æˆäº¤å£æ•¸     | `matchVolume`|

---

## âœ… I012 æ¼²è·Œå¹…è³‡è¨Š

### å°æ‡‰çµæ§‹ï¼š`PriceBandInfo`

| CSV æ¬„ä½       | å‹æ…‹   | èªªæ˜           | çµæ§‹æ¬„ä½      |
|----------------|--------|----------------|---------------|
| `productId`    | string | å•†å“ä»£ç¢¼       | `productId`   |
| `limitLevel`   | int    | ç¬¬å¹¾éšæ¼²è·Œåœ   | `limitLevel`  |
| `limitPrice`   | double | æ¼²åœåƒ¹æ ¼ï¼ˆå¦‚æœ‰ï¼‰| `raiseLimit`  |

> å‚™è¨»ï¼š`fallLimit` å¯å¦è¡Œè¼¸å‡ºæˆ–åˆä½µé¡¯ç¤º

---

## âœ… I080 å§”è¨—ç°¿å¿«ç…§ï¼ˆç°¡åŒ–ç‰ˆï¼‰

### å°æ‡‰çµæ§‹ï¼š`OrderBookInfo`

| CSV æ¬„ä½       | å‹æ…‹     | èªªæ˜         | çµæ§‹æ¬„ä½        |
|----------------|----------|--------------|-----------------|
| `time`         | int      | è³‡æ–™æ™‚é–“     | `updateTime`    |
| `productId`    | string   | å•†å“ä»£ç¢¼     | `productId`     |
| `bidPrice1`    | double   | ç¬¬ä¸€æª”è²·åƒ¹   | `bidPrice[0]`   |
| `bidVolume1`   | int      | ç¬¬ä¸€æª”è²·é‡   | `bidVolume[0]`  |
| `askPrice1`    | double   | ç¬¬ä¸€æª”è³£åƒ¹   | `askPrice[0]`   |
| `askVolume1`   | int      | ç¬¬ä¸€æª”è³£é‡   | `askVolume[0]`  |

---

## âœ… I010 å•†å“åŸºæœ¬è³‡è¨Š

### å°æ‡‰çµæ§‹ï¼š`ProductInfo`

| CSV æ¬„ä½        | å‹æ…‹       | èªªæ˜       | çµæ§‹æ¬„ä½        |
|-----------------|------------|------------|-----------------|
| `productId`     | string     | å•†å“ä»£ç¢¼   | `productId`     |
| `name`          | string     | å•†å“åç¨±   | `productName`   |
| `deliveryMonth` | string/int | äº¤å‰²æœˆä»½   | `deliveryMonth` |

---

### ğŸ“‚ è¼¸å‡ºæª”æ¡ˆä½ç½®

```
output/
â”œâ”€â”€ Fut_I010.csv
â”œâ”€â”€ Fut_I012.csv
â”œâ”€â”€ Fut_I020.csv
â”œâ”€â”€ Fut_I080.csv
â”œâ”€â”€ Opt_I010.csv
â”œâ”€â”€ Opt_I012.csv
â”œâ”€â”€ Opt_I020.csv
â””â”€â”€ Opt_I080.csv
```

ä½¿ç”¨ä»¥ä¸‹å‡½å¼åŒ¯å‡ºï¼š

```cpp
OutputFormatter::exportToCSV(database, "output/");
```


## ğŸ“ å°ˆæ¡ˆçµæ§‹ç¸½è¦½

```
TAIFEXPacketProject/
â”œâ”€â”€ data/                       # ğŸ“‚ æ¸¬è©¦ç”¨äºŒé€²ä½å°åŒ…æª” (å¦‚ Fut.bin / Opt.bin)
â”œâ”€â”€ doc/                        # ğŸ“‚ å°ˆæ¡ˆæ–‡ä»¶èˆ‡åœ–è¡¨è³‡æ–™
â”‚   â”œâ”€â”€ è³‡æ–™è™•ç†æµç¨‹åœ–.txt       # è™•ç†æµç¨‹æ–‡å­—èªªæ˜
â”‚   â”œâ”€â”€ ç³»çµ±ç‰©ä»¶é—œä¿‚.txt         # ç³»çµ±é—œè¯é—œä¿‚èªªæ˜
â”‚   â”œâ”€â”€ data_flowchart.png       # è³‡æ–™è™•ç†æµç¨‹åœ–
â”‚   â”œâ”€â”€ system_diagram.png       # ç³»çµ±æ¶æ§‹åœ–
â”‚   â”œâ”€â”€ å¤šåŸ·è¡Œç·’.png            # å¤šåŸ·è¡Œç·’èªªæ˜åœ–
â”‚   â”œâ”€â”€ å–®åŸ·è¡Œç·’.png            # å–®åŸ·è¡Œç·’èªªæ˜åœ–
â”‚   â””â”€â”€ è³‡è¨Šå‚³è¼¸ä½œæ¥­æ‰‹å†Š(V2.29.1).pdf # å®˜æ–¹ä½œæ¥­æ‰‹å†Š
â”œâ”€â”€ include/                    # ğŸ“‚ æ¨™é ­æª” (header files)
â”‚   â”œâ”€â”€ base/                   # æŠ½è±¡é¡åˆ¥èˆ‡ä»‹é¢
â”‚   â”œâ”€â”€ common/                 # å›ºå®šé•·åº¦çµæ§‹å·¥å…·
â”‚   â”œâ”€â”€ controller/             # ä¸»è§£ææµç¨‹æ§åˆ¶
â”‚   â”œâ”€â”€ data/                   # å°åŒ…è³‡æ–™çµæ§‹ (Header + Body)
â”‚   â”œâ”€â”€ dispatcher/             # å°åŒ…åˆ†ç™¼é‚è¼¯
â”‚   â”œâ”€â”€ output/                 # çµæœè¼¸å‡º (JSON / CSV)
â”‚   â”œâ”€â”€ parser/                 # å„æ ¼å¼ payload è§£æå™¨
â”‚   â”œâ”€â”€ protocol/               # å°åŒ…é€šç”¨æ¬„ä½ (Header)
â”‚   â””â”€â”€ storage/                # è¨˜æ†¶é«”å…§è³‡æ–™åº«
â”œâ”€â”€ src/                        # ğŸ“‚ å°æ‡‰ .cpp æª”æ¡ˆå¯¦ä½œ
â”œâ”€â”€ CMakeLists.txt              # ğŸ”§ CMake ç·¨è­¯è¨­å®š
â”œâ”€â”€ README.md                   # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
â””â”€â”€ main.cpp                    # æ¸¬è©¦æ•´åˆä¸»ç¨‹å¼
```

## ğŸ“¦ å·²æ”¯æ´å°åŒ…æ ¼å¼

| æ ¼å¼ä»£ç¢¼ | å°åŒ…åç¨±           | ç‹€æ…‹     |
|----------|--------------------|----------|
| I020     | æ’®åˆè³‡è¨Š           | âœ… å·²å®Œæˆ |
| I012     | æ¼²è·Œå¹…è³‡è¨Š         | âœ… å·²å®Œæˆ |
| I080     | å§”è¨—ç°¿å¿«ç…§è³‡è¨Š     | âœ… å·²å®Œæˆ |
| I010     | å•†å“åŸºæœ¬è³‡è¨Š       | âœ… å·²å®Œæˆ |

---

## ğŸ§ª åŸ·è¡Œæ–¹å¼èˆ‡æ¸¬è©¦è³‡æ–™

è«‹æ”¾ç½®æ¸¬è©¦æª”æ¡ˆæ–¼ `data/` ç›®éŒ„ï¼Œä¾‹å¦‚ï¼š

```
data/sample.bin
```

ä¸¦ä½¿ç”¨ä»¥ä¸‹æ­¥é©Ÿå»ºç½®èˆ‡åŸ·è¡Œï¼š

```bash
mkdir build && cd build
cmake ..
make
./TAIFEXMain
```

ä¸»ç¨‹å¼å°‡è®€å– `sample.bin`ã€è§£æå°åŒ…ï¼Œä¸¦è¼¸å‡ºè³‡è¨Šè‡³ console æˆ–å„²å­˜è‡³è³‡æ–™åº«ç‰©ä»¶ã€‚

---


## ğŸ‘¨â€ğŸ’» é–‹ç™¼è€…ç­†è¨˜

- æ‰€æœ‰è§£æçµæ§‹ç›¡é‡ç¬¦åˆ PODï¼ˆPlain Old Dataï¼‰è¨­è¨ˆï¼Œæ–¹ä¾¿è¨˜æ†¶é«” mapping èˆ‡é«˜é€Ÿè™•ç†ã€‚
- ä½¿ç”¨ `FixedArray`, `FixedString`, `TBCD` ç­‰å·¥å…·å¯¦ç¾å°åŒ…ä½å…ƒå°é½Šã€BCD ç·¨ç¢¼è™•ç†ã€‚
- å¯¦ä½œæ™‚å¯å„ªå…ˆæ¸¬è©¦å–®ä¸€æ ¼å¼ï¼ˆå¦‚ I020ï¼‰ï¼Œå†é€æ­¥æ“´å……è§£ææ”¯æ´ã€‚

---

