2️⃣ 問題背景

我最近做一個金融資料處理系統，要處理兩個很大的檔案：Fut.bin 跟 Opt.bin。

當我用傳統「一條線」的方式（單執行緒）來跑，就像排隊結帳，要一個一個慢慢處理。這樣跑下來，發現速度真的很慢。

我就想，能不能讓程式「多開幾條通道」，同時處理兩個檔案？

3️⃣ 核心概念

這時候就用到一個程式設計的概念：「多執行緒」 (multi-threading)。

簡單說，每個執行緒就像一個工作人員，能同時處理一件事。

單執行緒就像超市只有一個收銀台，大家排隊慢慢結帳。

多執行緒就像超市多開幾個收銀台，大家可以分散結帳，速度當然就快多了！

4️⃣ 我的程式怎麼做

我寫了兩個版本的程式：

單執行緒版：一次處理 Fut.bin，處理完再處理 Opt.bin。

多執行緒版：直接開兩條線，Fut.bin 和 Opt.bin 同時處理，像兩個工作人員同時在工作。

結果怎麼樣？

多執行緒的版本，速度直接快一倍以上！

5️⃣ 過程中踩到的坑

一開始我以為這樣就完美了，結果程式的輸出超級亂，像這樣：

[Thread1] 開始處理 Fut.bin
[Thread2] 開始處理 Opt.bin
Thread1Thread2 結束

看起來好像程式壞掉了，但其實不是！

原來是因為 程式的輸出（像 std::cout）本身不是設計來讓多個執行緒同時使用的，就像兩個人同時在一張白板上寫字，會打架。

後來我加了一個鎖（mutex），就像規定好「一個人寫完再換下一個人寫」，這樣問題就解決了！

6️⃣ 總結與收尾

這次經驗我學到兩個重點：

1️⃣ 多執行緒真的可以大幅提升效能，尤其是獨立的工作要同時處理時。

2️⃣ 但要小心，不是每個東西都可以同時跑，有些資源（像 std::cout）需要特別保護。

這就是為什麼學程式設計，不只是會寫程式，還要會思考架構和問題發生的原因！

這次的經驗，讓我更有信心面對大型系統設計的挑戰！

🎁 補充：兩個版本程式效能對比

版本

執行時間（秒）

處理邏輯

單執行緒版本

較慢

Fut.bin ➔ Opt.bin 依序處理

多執行緒版本

較快

Fut.bin 和 Opt.bin 同時處理

🎯 學到的觀念

✅ 多執行緒的威力
✅ mutex（鎖）的概念與正確使用
✅ 學會定位問題的根源
✅ 理解效能優化不是亂加程式碼，而是用對設計

謝謝大家！ 🎤