@startuml
skinparam dpi 150
skinparam shadowing false
skinparam defaultTextAlignment center
skinparam classAttributeIconSize 0
skinparam linetype ortho
skinparam roundCorner 15
skinparam packageStyle rectangle
skinparam defaultFontName "Noto Sans CJK TC"

package "controller ðŸŽ®" #D5E8D4 {
  class TAIFEXPacketParser
  class HeaderParser
}

package "dispatcher ðŸ“¨" #E1D5E7 {
  class PacketDispatcher
}

package "parser ðŸ§©" #DDFFDD {
  class I020Parser
  class I012Parser
  class I080Parser
}

package "base ðŸŒ±" #FFEEEE {
  class ParsedResultBase
  class TAIFEXParserInterface
}

package "data ðŸ“Š" #FFF2CC {
  class MatchInfo
  class ProductInfo
  class PriceBandInfo
  class OrderBookInfo
  class I020Packet
}

package "common ðŸ”§" #E6E6FA {
  class TBCD
  class FixedArray
  class FixedString
  class EncodingUtils
}

package "storage ðŸ’¾" #F8CECC {
  class TAIFEXMemoryDatabase
}

package "output ðŸ–¨ï¸" #DAE8FC {
  class OutputFormatter
}

package "query ðŸ”" #F5F5F5 {
  class DataQuery
}

package "state ðŸ”" #FFE6CC {
  class StateUpdater
}

' ======================
' ç¹¼æ‰¿èˆ‡å¯¦ä½œ
I020Parser --|> TAIFEXParserInterface
I012Parser --|> TAIFEXParserInterface
I080Parser --|> TAIFEXParserInterface

' ======================
' æŽ§åˆ¶æµç¨‹
TAIFEXPacketParser -down-> HeaderParser
TAIFEXPacketParser -down-> PacketDispatcher
PacketDispatcher -down-> I020Parser
PacketDispatcher -down-> I012Parser
PacketDispatcher -down-> I080Parser

' ======================
' è³‡æ–™æµ
I020Parser -down-> MatchInfo
I012Parser -down-> PriceBandInfo
I080Parser -down-> OrderBookInfo
I020Packet -down-> MatchInfo

TAIFEXPacketParser -right-> TAIFEXMemoryDatabase
TAIFEXMemoryDatabase -down-> MatchInfo

' ======================
' å·¥å…·ä½¿ç”¨
MatchInfo -right-> FixedArray
MatchInfo -right-> FixedString
MatchInfo -right-> TBCD
MatchInfo -right-> EncodingUtils

' ======================
' æŸ¥è©¢èˆ‡è¼¸å‡º
TAIFEXMemoryDatabase -down-> DataQuery
DataQuery -down-> OutputFormatter
DataQuery -right-> StateUpdater

@enduml
